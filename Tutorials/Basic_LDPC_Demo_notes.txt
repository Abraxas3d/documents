We need LDPC encoding and decoding for Phase 4 Ground.

These notes are a narrative of the process of learning about the LDPC-related blocks in GNU radio. 

First, we look at the LDPC Encoder in the DVB section. 

There’s an ID field (all GNU radio blocks have one), a Standard selection (DVB-S2 or DVB-T2), FECFRAME size selection (normal or short), Code Rate (lots of choices), and Constellation (Other and 128APSK). 

The medium FECFRAME size from DVB-S2X is not available.
DVB-S2X code rates are not available.

This means that this block doesn’t support the additional DVB-S2X code rates or the additional DVB-S2X frame size of 32400 bits. DVB-S2 has short (was “normal”) 16200 bits and long 64800 bits. 

I’m not sure why there’s only two constellations listed in the drop-down box. There are many constellations? 

So, what needs to happen with this block?

First, we should understand how to use it. I’m trying to make a demo. If you already have or know of one, or are better at GNU radio, your help will be appreciated. My scheme is to create random inputs, save a copy, send the other copy to LDPC encode, then LDPC decode, and compare the before and after. This may sound pedantic, but you have to start somewhere, and I’m “GNU” at this. 

At a minimum, we should update this block with DVB-S2X code rates and frame sizes. I’d like to understand why there’s “other” and “128APSK” listed as constellations. 

LDPC Encoder “Documentation” tab has the following content. 

--- dtv_dvb_ldpc_bb ---

        make(gr::dtv::dvb_standard_t standard, gr::dtv::dvb_framesize_t framesize, gr::dtv::dvb_code_rate_t rate, gr::dtv::dvb_constellation_t constellation) -> dvb_ldpc_bb_sptr
        Encodes a LDPC (Low-Density Parity-Check) FEC.
        Input: Variable length FEC baseband frames with appended BCH (BCHFEC). Output: Normal or short FEC baseband frames with appended LPDC (LDPCFEC).
        Constructor Specific Documentation:
        Create a baseband frame LDPC encoder.
        Args:
            standard : DVB standard (DVB-S2 or DVB-T2).
            framesize : FEC frame size (normal or short).
            rate : FEC code rate.
            constellation : DVB-S2 constellation.





A file related to this block seems to be ldpc_encoder.h

This is a header file with the same name as the block we’re looking at. Here’s the contents of this file:

/* -*- c++ -*- */
/*
 * Copyright 2015 Free Software Foundation, Inc.
 *
 * This file is part of GNU Radio
 *
 * GNU Radio is free software; you can redistribute it and/or modify
 * it under the terms of the GNU General Public License as published by
 * the Free Software Foundation; either version 3, or (at your option)
 * any later version.
 *
 * GNU Radio is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 * GNU General Public License for more details.
 *
 * You should have received a copy of the GNU General Public License
 * along with GNU Radio; see the file COPYING.  If not, write to
 * the Free Software Foundation, Inc., 51 Franklin Street,
 * Boston, MA 02110-1301, USA.
 */

#ifndef INCLUDED_LDPC_ENCODER_H
#define INCLUDED_LDPC_ENCODER_H

#include <gnuradio/fec/encoder.h>
#include <string>
#include <vector>

namespace gr {
  namespace fec {

    class FEC_API ldpc_encoder : virtual public generic_encoder
    {
    public:
      static generic_encoder::sptr make (std::string alist_file);

      virtual double rate() = 0;
      virtual bool set_frame_size(unsigned int frame_size) = 0;
      virtual int get_output_size() = 0;
      virtual int get_input_size() = 0;
    };

  }
}

#endif /* INCLUDED_LDPC_ENCODER_H */
































The next block is LDPC Encoder Definition. 

The default ID field is variable_ldpc_encoder_def_0

The Parallelism drop down selector has 0, 1, and 2 as choices.

The AList File is a file selector. 

There is no documentation in the documentation tab.

When this block is placed, then “Value "fec.ldpc_encoder_make("")" cannot be evaluated:
Bad AList file name!” is the message in the console. 

an xml file called ldpc_encoder_def_list.xml has the following contents:



<?xml version="1.0"?>

<block>
  <name>LDPC Encoder Definition</name>
  <key>variable_ldpc_encoder_def</key>
  <import>from gnuradio import fec</import>
  <var_make>
#if int($ndim())==0 #
self.$(id) = $(id) = fec.ldpc_encoder_make($file); #slurp
#else if int($ndim())==1 #
self.$(id) = $(id) = map( (lambda a: fec.ldpc_encoder_make($file)), range(0,$dim1) ); #slurp
#else
self.$(id) = $(id) = map( (lambda b: map( ( lambda a: fec.ldpc_encoder_make($file)), range(0,$dim2) ) ), range(0,$dim1)); #slurp
#end if</var_make>
  <var_value>fec.ldpc_encoder_make($file)</var_value>
  <make></make>

  <param>
    <name>Ignore Me</name>
    <key>value</key>
    <value>"ok"</value>
    <type>raw</type>
    <hide>all</hide>
  </param>

  <param>
    <name>Parallelism</name>
    <key>ndim</key>
    <value>0</value>
    <type>enum</type>
    <option>
      <name>0</name>
      <key>0</key>
    </option>
    <option>
      <name>1</name>
      <key>1</key>
    </option>
    <option>
      <name>2</name>
      <key>2</key>
    </option>
  </param>

  <param>
    <name>Dimension 1</name>
    <key>dim1</key>
    <value>1</value>
    <type>int</type>
    <hide>#if (int($ndim()) >= 1) then 'none' else 'all' #</hide>
  </param>

  <param>
    <name>Dimension 2</name>
    <key>dim2</key>
    <value>4</value>
    <type>int</type>
    <hide>#if (int($ndim()) >= 2) then 'none' else 'all' #</hide>
  </param>

  <param>
    <name>AList File</name>
    <key>file</key>
    <value></value>
    <type>file_open</type>
  </param>

</block>



This is the description that’s used to make the GUI in the block? 






